# Send Earn

Send Earn is a permissionless, non-custodial way for users to deposit their USDC into a vault and earn yield on their USDC. Send Earn is a vault-on-a-vault solution powered by Morpho and Moonwell. Users deposit their USDC into a Send Earn USDC (seUSDC) vault. In turn, the vault deposits the vault's assets into a Moonwell USDC (mwUSDC) vault. Users can also withdraw their USDC from the vault at any time.

Send Earn's pioneering approach is to reward users for referring others to use Send Earn.

## How it works

Each user deposits into the Send Earn vault. Optionally, a user can set a referrer. This allows referrals to be set for each user and effectively shares the fees between the platform (send.app) and the referrer.

The vault tracks the user's share of the vault's assets and the vault's assets in the mwUSDC vault. When a user deposits into the Send Earn vault, the vault deposits into the mwUSDC vault on behalf of the user. The vault then mints shares to the user.

When a user withdraws from the Send Earn vault, the vault redeems the user's underlying mwUSDC shares from the Morpho vault, updates the Send Earn fees, and sends the user's underlying mwUSDC shares to the user.

The user's deposits are supplied as liquidity to lending pools. A user earns yield from the Morpho protocol on their USDC deposits which accrue and compound automatically.

Fees are paid by the interest accrued on the user's deposit in the Send Earn vault. Optionally, when a user deposits into the Send Earn vault, if a user was referred by another user, a portion of the fee should be paid to the referrer. The fees and interest are updated every time the vault's assets are updated.

### Specification

Send Earn implements the ERC-4626 Tokenized Vault standard, providing a vault-on-vault solution that wraps Moonwell's mwUSDC vault while adding referral capabilities.

Send Earn allows the minting and burning of "shares" (seUSDC) in exchange for underlying "assets" (mwUSDC) through standardized deposit, mint, redeem, and burn workflows. This contract extends the ERC20 standard. Any additional extensions included along with it would affect the "shares" token represented by this contract and not the "assets" token, which is an independent contract.

#### Definitions:

- Asset: The underlying token managed by the Vault. Has units defined by the corresponding EIP-20 contract.
  - e.g. USDC (6 decimals)
- Share: The token of the Vault. Has a ratio of underlying assets exchanged on mint/deposit/withdraw/redeem (as defined by the Vault).
  - e.g. Send Earn vault shares seUSDC
  - e.g. Moonwell wrapped USDC mwUSDC
- Fee: An amount of assets or shares charged to the user by the Vault.
- Slippage: Any difference between the advertised share price and economic realities of depositing to or withdrawing from the Vault, which is not accounted for by fees.

#### Core Components

- Asset (Underlying Token): USDC
- Share Token: Send Earn vault shares seUSDC
- Intermediate Asset: mwUSDC

#### Vault Mechanics

The vault operates through a two-layer deposit system:
1. Users deposit USDC and receive Send Earn USDC shares (seUSDC)
2. The vault deposits USDC into Moonwell to receive mwUSDC
3. The vault tracks both user shares and the corresponding mwUSDC position

#### Asset/Share Conversion

All conversions MUST round down in favor of the vault for security. The vault's share price is determined by:
- Total mwUSDC holdings converted to USDC value
- Total supply of Send Earn shares
- Accrued but uncollected yield

#### Fee Structure

Fees are collected from the yield generated by the Vault and are distributed to the fee recipient and optionally, the referrer if one is set for a user.

Fees are taken only from yield generation, not from deposits or withdrawals:
- Platform yield fee: 6% of generated yield (configurable by admin)
- Referral fee: 2% of generated yield (configurable by admin)
- Total fees = Platform yield fee + Referral fee = 8% of generated yield
- If the referral fee is 0, then the platform fee is increased to 8% of generated yield
- Fees are calculated and collected during:
  - Deposits
  - Withdrawals
  - Explicit yield collection calls
- Fees should be configurable by an admin:
  - Platform fee
  - Referral fee
- A maximum fee should be set to prevent large accidental fee modifications

#### Referral System

Users can deposit with an optional referral address:
- Referrers earn a percentage of their referees' generated yield
- Referral relationships are immutable once set
- Referral fees are taken from the base yield fee, not additional fees
- Fee split:
  - No referral: 100% to Send treasury
  - With referral: a percentage to referrer, the remainder to Send treasury

#### Deposit/Withdrawal Limits

- Maximum deposit: Determined by Moonwell's mwUSDC vault capacity
- Minimum deposit: No minimum.
- Withdrawals: No minimum, subject to available liquidity

#### Morpho Rewards Program

Morpho programs exist for Moonwell and Morpho vaults. The Send Earn vault will be eligible for the Morpho Rewards program and will have to claim rewards.

The morpho rewards are distributed to Send Earn vaults as ERC20 tokens. Each vault has a collections address that all rewards are sent to. All that is required to collect rewards is to call the collect function on the vault.
